<!DOCTYPE html>
<html>
<head>
    <title>Library Stats</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
	<link rel= "stylesheet" href= "{{ url_for('static', filename='css/stats_styles.css') }}">
</head>
<body>
	{% include 'header-lib.html' %}
	<div class="mainbody-nonlogin">
		<div class="row">
			<div class="col-md-6">
				<!-- First div content here -->
				<table class="graph">
					<caption>Section wise Books Available</caption>
					<thead>
						<tr>
							<th scope="col">Sections</th>
							<th scope="col">Books</th>
						</tr>
					</thead>
					<tbody>
						{% for section, value in sections.items() %}
							<tr style="height: {{ value }} ">
								<th scope="row">{{ section }}</th>
								<td style="height: {{value*30}}px"><span>{{ value }}</span></td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>

			
			<div class="col-md-6">
				<table class="graph">
					<caption>Books Summary:</caption>
					<thead>
						<tr>
							<th scope="col"> </th>
							<th scope="col">Number of Books</th>
						</tr>
					</thead>
					<tbody>
						{% for section, value in books_stats.items() %}
							<tr style="height: {{ value }} ">
								<th scope="row">{{ section }}</th>
								<td style="height: {{value*30}}px"><span>{{ value }}</span></td>
							</tr>
						{% endfor %}
					</tbody>	
				</table>
				<!-- Content for 80% of the available space -->
			<!-- Second div content here -->
		</div>
	</div>
	<br><br><br><br><br><br>
	<hr>
	<div class="row">
		<div class="col-md-6">
			<h2>Users List</h2>
			<table class="table table-scroll table-striped">
				<thead>
					<tr>
						<th scope="col">Usernames</th>
						<th scope="col">Number of Books Read</th>
					</tr>
				</thead>
				<tbody>
					{% for uname, books in users_list.items() %}
						<tr>
							<td>{{ uname }}</td>
							<td>{{ books }}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		<div class="col-md-6">
			<h2>Most Read Section:{{most_liked_section}}</h2>
			<h2>Most Read Book:{{most_read_book}}</h2>
			<h2>Total Active Students:{{active_users}}</h2>
		</div>		

	</div>
	<br>
	<hr>
	<div class="row">
		<div class="col-md-6">
			<h2>Top Rated Books:</h2>
			<table class="table table-scroll table-striped">
				<thead>
					<tr>
						<th scope="col">Book Title</th>
						<th scope="col">Rating</th>
					</tr>
				</thead>
				<tbody>
					{% for book, rating in top_rated_books.items() %}
						<tr>
							<td>{{ book }}</td>
							<td>{{ rating }}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>	
		</div>
	
		<div class="col-md-6">
			<h2>User Reviews</h2>
			<table class="table table-scroll table-striped">
				<thead>
					<tr>
						<th scope="col">Book Title</th>
						<th scope="col">User</th>
						<th scope="col">User Review</th>
					</tr>
				</thead>
				<tbody>
					{% for book, review in user_reviews.items() %}
						<tr>
							<td>{{ book }}</td>
							<td>{{ review[1] }}</td>
							<td>{{ review[0] }}</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
	</div>
	{% include 'footer.html' %}
</body>
</html>